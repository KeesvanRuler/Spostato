@page "/overview"
@using BlazorWebApp.Services
@using Microsoft.AspNetCore.Components.Authorization
@using SpostatoDAL.Models
@using SpostatoBL.Enum
@inject NavigationManager NavigationManager
@inject IGangsterService GangsterService
@inject AuthenticationStateProvider AuthenticationStateProvider

<RadzenCard>
    <h1>Overzicht van @gangster.Name</h1>
    
    <div class="row">
        <div class="col-md-6">
            <h2>Algemene Informatie</h2>
            <p>Rang: @gangster.Rank</p>
            <p>Geld op zak: €@gangster.AmountOfMoneyInPocket</p>
            <p>Geld op de bank: €@gangster.AmountOfMoneyInBank</p>
            <p>Kogels: @gangster.AmountOfBullets</p>
            <p>Gezondheid: @gangster.HP%</p>
            <p>Wapen: @(gangster.Weapon?.ToString() ?? "Geen")</p>
            <p>Huidige stad: @(gangster.CurrentCity?.Name ?? "Onbekend")</p>
            <p>Lid van gang: @(gangster.Gang?.Name ?? "Geen")</p>
            <p>Eigen gang: @(gangster.OwnGang?.Name ?? "Geen")</p>
            <p>Persoonlijk vervoer: @(gangster.HasPrivateJet ? "Privéjet" : "Geen")</p>
        </div>
        
        <div class="col-md-6">
            <h2>Vaardigheden en Progressie</h2>
            <div class="row">
                <div class="col-md-6">
                    <RadzenRadialGauge Style="width: 100%; height: 200px;">
                        <RadzenRadialGaugeScale StartAngle="-150" EndAngle="150" Step="20" Min="0" Max="100" TickPosition=@GaugeTickPosition.Inside>
                            <RadzenRadialGaugeScalePointer Value="@gangster.RankProgression" Length="0.6" />
                        </RadzenRadialGaugeScale>
                    </RadzenRadialGauge>
                    <p class="text-center">Rank Progressie: @gangster.RankProgression.ToString("F2")%</p>
                </div>
                <div class="col-md-6">
                    <RadzenRadialGauge Style="width: 100%; height: 200px;">
                        <RadzenRadialGaugeScale StartAngle="-150" EndAngle="150" Step="20" Min="0" Max="100" TickPosition=@GaugeTickPosition.Inside>
                            <RadzenRadialGaugeScalePointer Value="@gangster.ShootingSkill" Length="0.6" />
                        </RadzenRadialGaugeScale>
                    </RadzenRadialGauge>
                    <p class="text-center">Schiet Vaardigheid: @gangster.ShootingSkill.ToString("F2")%</p>
                </div>
            </div>
            <div class="row mt-3">
                <div class="col-md-6">
                    <RadzenRadialGauge Style="width: 100%; height: 200px;">
                        <RadzenRadialGaugeScale StartAngle="-150" EndAngle="150" Step="20" Min="0" Max="100" TickPosition=@GaugeTickPosition.Inside>
                            <RadzenRadialGaugeScalePointer Value="@gangster.DrivingSkill" Length="0.6" />
                        </RadzenRadialGaugeScale>
                    </RadzenRadialGauge>
                    <p class="text-center">Rij Vaardigheid: @gangster.DrivingSkill.ToString("F2")%</p>
                </div>
                <div class="col-md-6">
                    <RadzenRadialGauge Style="width: 100%; height: 200px;">
                        <RadzenRadialGaugeScale StartAngle="-150" EndAngle="150" Step="20" Min="0" Max="100" TickPosition=@GaugeTickPosition.Inside>
                            <RadzenRadialGaugeScalePointer Value="@gangster.BreakoutSkill" Length="0.6" />
                        </RadzenRadialGaugeScale>
                    </RadzenRadialGauge>
                    <p class="text-center">Uitbreek Vaardigheid: @gangster.BreakoutSkill.ToString("F2")%</p>
                </div>
            </div>
        </div>
    </div>
    
    @if (gangster.Prison != null)
    {
        <div class="mt-3">
            <h2>Gevangenis Informatie</h2>
            <p>Je zit momenteel in de gevangenis!</p>
            <p>Vrij op: @gangster.InPrisonUntill.ToString("dd/MM/yyyy HH:mm:ss")</p>
            <p>Uitkoopbedrag: €@gangster.BuyOutAmount</p>
            <RadzenButton Text="Koop Vrij" Click="@BuyOutOfPrison" ButtonStyle="ButtonStyle.Primary" Disabled="@(gangster.AmountOfMoneyInPocket < gangster.BuyOutAmount)" />
        </div>
    }
    
    <div class="mt-3">
        <RadzenButton Text="Terug naar Misdaden" Click="@(() => NavigationManager.NavigateTo("/crime"))" ButtonStyle="ButtonStyle.Secondary" />
    </div>
</RadzenCard>


